<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Using SReachTools on CodeOcean | SReachTools</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Using SReachTools on CodeOcean" />
<meta name="author" content="Abraham P. Vinod" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="CodeOcean is a cloud-based computational reproducibility platform. This post shows how you can utilize SReachTools in your CodeOcean capsule for repeatability. We list few examples that show SReachTools setup for CodeOcean. Then, we detail the procedure to set up a new capsule." />
<meta property="og:description" content="CodeOcean is a cloud-based computational reproducibility platform. This post shows how you can utilize SReachTools in your CodeOcean capsule for repeatability. We list few examples that show SReachTools setup for CodeOcean. Then, we detail the procedure to set up a new capsule." />
<link rel="canonical" href="http://localhost:4000/repeatability/2019/04/07/SReachTools-and-codeocean.html" />
<meta property="og:url" content="http://localhost:4000/repeatability/2019/04/07/SReachTools-and-codeocean.html" />
<meta property="og:site_name" content="SReachTools" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-04-07T09:00:00-05:00" />
<script type="application/ld+json">
{"headline":"Using SReachTools on CodeOcean","dateModified":"2019-04-07T09:00:00-05:00","datePublished":"2019-04-07T09:00:00-05:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/repeatability/2019/04/07/SReachTools-and-codeocean.html"},"url":"http://localhost:4000/repeatability/2019/04/07/SReachTools-and-codeocean.html","author":{"@type":"Person","name":"Abraham P. Vinod"},"description":"CodeOcean is a cloud-based computational reproducibility platform. This post shows how you can utilize SReachTools in your CodeOcean capsule for repeatability. We list few examples that show SReachTools setup for CodeOcean. Then, we detail the procedure to set up a new capsule.","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="SReachTools" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">SReachTools</a>
    <div style="float: left; padding-top: 9px; padding-left: 15px; height: 45px;">
      <a href="https://github.com/sreachtools/SReachTools" style="line-height: 54px;">
        <svg viewBox="0 0 16 16" width="30px" height="30px"><path fill="#ffffff" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/></svg>
      </a>
    </div><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
<!--<a class="page-link" href="/blog/">Blog Posts</a><a class="page-link" href="/contributing/">Contributing Guidelines</a><a class="page-link" href="/docs/">Documentation</a><a class="page-link" href="/examples/">Examples</a><a class="page-link" href="/">Stochastic Reachability Toolbox for MATLAB</a><a class="page-link" href="/installation.html">Dependencies &amp; Installation</a><a class="page-link" href="/license/">Licenses</a><a class="page-link" href="/long_description.html">Stochastic Reachability Toolbox</a>-->
            <a class="page-link" href="/">Home</a>
            <a class="page-link" href="/installation">Installation</a>
            <!-- <a class="page-link" href="/about">About</a> -->
            <a class="page-link" href="/docs">Docs</a>
            <a class="page-link" href="/examples">Examples</a>
            <a class="page-link" href="/license">Licenses</a>
            <!-- <a class="page-link" href="/contact">Contact</a> -->
        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Using SReachTools on CodeOcean</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2019-04-07T09:00:00-05:00" itemprop="datePublished">Apr 7, 2019
      </time>• <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span class="p-author h-card" itemprop="name">Abraham P. Vinod</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>CodeOcean is a  cloud-based computational reproducibility platform. This post
shows how you can utilize SReachTools in your CodeOcean capsule for
repeatability. We list few examples that show SReachTools setup for CodeOcean.
Then, we detail the procedure to set up a new capsule.</p>

<h3 id="examples">Examples</h3>

<ol>
  <li><a href="https://codeocean.com/capsule/9849812/tree">Dubins’ car: <code class="highlighter-rouge">SReachSet</code> demonstration</a> — &lt;2 min runtime.</li>
  <li><a href="https://codeocean.com/capsule/81dbdd67-83a4-4b7a-87eb-fbfc1fe72ef2/tree?ID=1763713383dc4aadaf77c4a8c9085b7f">ARCH 2019: Automated anesthesia delivery</a> — &lt;1 min runtime.</li>
  <li><a href="https://codeocean.com/capsule/ddfa8988-7061-4b9c-8cc8-0d3393a6bf02/tree?ID=64794d9f443f4fbc9ba1710cbd0e72c7">ARCH 2019: Building automation system</a> — &lt;1 min runtime.
<!--1. Spacecraft rendezvous problem: `SReachPoint` demonstration--></li>
</ol>

<h3 id="detailed-procedure">Detailed procedure</h3>

<p>We choose MATLAB 2017b and the follow the installation instructions given in
<a href="/installation/">the installation page</a> to setup <code class="highlighter-rouge">GMP</code>, <code class="highlighter-rouge">GeoCalcLib</code>, <code class="highlighter-rouge">YALMIP</code>,
<code class="highlighter-rouge">CVX</code>, <code class="highlighter-rouge">MPT3</code>, and finally <code class="highlighter-rouge">SReachTools</code>.</p>

<ol>
  <li>Create a new capsule</li>
  <li>Choose MATLAB 2017b environment
    <ol>
      <li>At the time of writing, this was the latest MATLAB environment available.</li>
    </ol>
  </li>
  <li>In additional packages, add the following:
    <ol>
      <li><code class="highlighter-rouge">bzip2</code> (tested with 1.0.6-8) — for unzipping MATLAB toolboxes</li>
      <li><code class="highlighter-rouge">build-essential</code> (tested with 12.1ubuntu2) — for
<a href="https://github.com/worc4021/GeoCalcLib">GeoCalcLib</a> installation (<code class="highlighter-rouge">gcc</code>
and <code class="highlighter-rouge">make</code>)</li>
      <li><code class="highlighter-rouge">m4</code> (tested with 1.4.17-5) — for
<a href="https://github.com/worc4021/GeoCalcLib">GeoCalcLib</a> installation</li>
    </ol>
  </li>
  <li>Next, copy the following text into <code class="highlighter-rouge">post-install script</code> section:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">#!/bin/bash</span>
    
 <span class="c">### Install GMP</span>
 <span class="c"># Requires packages build-essentials for gcc and make, and package m4 (don't know why)</span>
 curl <span class="nt">-sL</span> https://gmplib.org/download/gmp/gmp-6.1.2.tar.bz2 | <span class="nb">tar </span>xj
 <span class="nb">echo</span> <span class="s1">'Downloaded GMP'</span>
 <span class="nb">cd </span>gmp-6.1.2
 <span class="c"># Setup gmp</span>
 ./configure 
 make 
 make <span class="nb">install
 cd</span> ..
 <span class="nb">echo</span> <span class="s1">'Installed GMP'</span>
    
 <span class="c">### GeoCalcLib (Download and setup)</span>
 <span class="c"># Requires installation of gmp and packages build-essentials for gcc and make </span>
 curl <span class="nt">-sL</span> https://github.com/worc4021/GeoCalcLib/archive/master.zip <span class="nt">--output</span> GeoCalcLib.zip
 unzip <span class="nt">-qq</span> GeoCalcLib.zip
 <span class="nb">mv </span>GeoCalcLib-master GeoCalcLib
 <span class="nb">rm </span>GeoCalcLib.zip
 <span class="nb">echo</span> <span class="s1">'Downloaded GeoCalcLib'</span>
 <span class="c"># Setup GeoCalcLib</span>
 <span class="nb">cd </span>GeoCalcLib
 <span class="nb">mkdir </span>mexfiles
 <span class="nb">echo</span> <span class="s1">'MATLABROOT = /MATLAB'</span> <span class="o">&gt;</span> User.make
 <span class="nb">echo</span> <span class="s1">'INSTALLDIR = /GeoCalcLib/mexfiles'</span> <span class="o">&gt;&gt;</span> User.make
 make
 <span class="nb">cd</span> ..
 <span class="nb">echo</span> <span class="s1">'Installed GeoCalcLib'</span>
    
 <span class="c">### YALMIP (Download only)</span>
 <span class="c"># MATLAB simply adds the files to the path to complete the setup</span>
 <span class="nv">YALMIP_RELEASE</span><span class="o">=</span>R20181012
 curl <span class="nt">-sL</span> https://github.com/yalmip/YALMIP/archive/<span class="nv">$YALMIP_RELEASE</span>.tar.gz | <span class="nb">tar </span>xz
 <span class="nb">mv </span>YALMIP-<span class="nv">$YALMIP_RELEASE</span> YALMIP
 <span class="nb">echo</span> <span class="s1">'Downloaded YALMIP'</span>
    
 <span class="c">### CVX (Download only)</span>
 <span class="c"># We call cvx_setup in MATLAB to complete the setup</span>
 curl <span class="nt">-sL</span> http://web.cvxr.com/cvx/cvx-a64.tar.gz | <span class="nb">tar </span>zx
 <span class="nb">echo</span> <span class="s1">'Downloaded CVX'</span>
    
 <span class="c">### SReachTools (Download only)</span>
 <span class="c"># Call srtinit in MATLAB to complete the setup</span>
 <span class="c">## OPTION 1: Fetch a tagged release</span>
 <span class="c">#</span>
 <span class="nv">SREACHTOOLS_RELEASE</span><span class="o">=</span>1.2
 curl <span class="nt">-sL</span> https://github.com/unm-hscl/SReachTools/archive/v<span class="nv">$SREACHTOOLS_RELEASE</span>.zip <span class="nt">--output</span> SReachTools.zip
 unzip <span class="nt">-qq</span> SReachTools.zip
 <span class="nb">mv </span>SReachTools-<span class="nv">$SREACHTOOLS_RELEASE</span> SReachTools
 <span class="nb">rm </span>SReachTools.zip
 <span class="nb">echo</span> <span class="s1">'Downloaded SReachTools'</span>
 <span class="c">#</span>
 <span class="c"># ## OPTION 2: Fetch bleeding edge</span>
 <span class="c">#</span>
 <span class="c"># curl -sL https://github.com/unm-hscl/SReachTools/archive/master.zip --output SReachTools.zip</span>
 <span class="c"># unzip -qq SReachTools.zip</span>
 <span class="c"># mv SReachTools-master SReachTools</span>
 <span class="c"># rm SReachTools.zip</span>
 <span class="c"># echo 'Downloaded SReachTools'</span>
    
 <span class="c">### Setup MATLAB env for GeoCalcLib, YALMIP, CVX, MPT3, and SReachTools</span>
 <span class="c"># Trailing \ implies newline in bash. MATLAB executes the commands in the quotes.</span>
 <span class="c"># Make sure each line ends with ;\ to avoid MATLAB throwing errors</span>
 <span class="c"># Use GPLK instead of LCP to avoid wierd shifting | Don't do mpt_init again</span>
 <span class="c"># 1. Add GeoCalcLib to path</span>
 <span class="c"># 2. Add YALMIP to the path</span>
 <span class="c"># 3. Setup CVX</span>
 <span class="c"># 4. Fetch and install MPT3 using tbxmanager; Initialize MPT3</span>
 <span class="c"># 5. Setup SReachTools</span>
 <span class="c"># Even though, we do not recommend using savepath, we have to do it here due to</span>
 <span class="c"># CodeOcean's setup</span>
 matlab <span class="nt">-nodisplay</span> <span class="nt">-r</span> <span class="s2">"</span><span class="se">\</span><span class="s2">
 addpath('/GeoCalcLib/mexfiles');</span><span class="se">\</span><span class="s2">
 disp('Installed GeoCalcLib');</span><span class="se">\</span><span class="s2">
 addpath(genpath('/YALMIP'));</span><span class="se">\</span><span class="s2">
 disp('Installed YALMIP');</span><span class="se">\</span><span class="s2">
 cd('/cvx');</span><span class="se">\</span><span class="s2">
 evalc('cvx_setup()');</span><span class="se">\</span><span class="s2">
 disp('Installed CVX (Standard bundle)');</span><span class="se">\</span><span class="s2">
 mkdir('/tbxmanager');</span><span class="se">\</span><span class="s2">
 cd('/tbxmanager');</span><span class="se">\</span><span class="s2">
 urlwrite('http://www.tbxmanager.com/tbxmanager.m', 'tbxmanager.m');</span><span class="se">\</span><span class="s2">
 a=evalc('tbxmanager');</span><span class="se">\</span><span class="s2">
 disp('Installed tbxmanager');</span><span class="se">\</span><span class="s2">
 evalc('tbxmanager install mpt mptdoc cddmex fourier glpkmex hysdel lcp sedumi espresso');</span><span class="se">\</span><span class="s2">
 evalc('mpt_init');</span><span class="se">\</span><span class="s2">
 a=mptopt('lpsolver','glpk','qpsolver','quadprog');</span><span class="se">\</span><span class="s2">
 disp('Installed MPT3');</span><span class="se">\</span><span class="s2">
 cd('/SReachTools');</span><span class="se">\</span><span class="s2">
 srtinit;</span><span class="se">\</span><span class="s2">
 disp('Installed SReachTools');</span><span class="se">\</span><span class="s2">
 savepath;"</span>
</code></pre></div>    </div>
  </li>
  <li>Create a file <code class="highlighter-rouge">run.sh</code> in the <code class="highlighter-rouge">code</code> folder.
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">#!/bin/bash</span>
 matlab <span class="nt">-nodisplay</span> <span class="nt">-nosoftwareopengl</span> <span class="nt">-r</span> <span class="s2">"dubinsSReachSetGauss;"</span>
</code></pre></div>    </div>
    <p>This runs a default example in <code class="highlighter-rouge">SReachTools</code>. If you wish to run a separate
 MATLAB script <code class="highlighter-rouge">main.m</code>, you can upload it the <code class="highlighter-rouge">code</code> folder, and overwrite
 <code class="highlighter-rouge">run.sh</code> with</p>
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">#!/bin/bash</span>
 matlab <span class="nt">-nodisplay</span> <span class="nt">-nosoftwareopengl</span> <span class="nt">-r</span> <span class="s2">"main;"</span>
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="notes">Notes</h4>

<ul>
  <li>The first run will take about 3 minutes for setting up of the environment.
However, if the <code class="highlighter-rouge">post-install script</code> is left untouched, then subsequent runs
will be significantly faster.</li>
  <li>CodeOcean, by default, does not save figures. Use the following lines to save
a figure as a <code class="highlighter-rouge">png</code> or <code class="highlighter-rouge">fig</code> file.
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>saveas(gcf, '../results/FILENAME.png');
saveas(gcf, '../results/FILENAME.fig');
</code></pre></div>    </div>
  </li>
</ul>


  </div><a class="u-url" href="/repeatability/2019/04/07/SReachTools-and-codeocean.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">
    <div class="footer-col-wrapper">
      <div style="text-align: center;">
          <p>&copy 2019 <a href="https://abyvinod.github.io">Abraham P. Vinod</a>, <a href="https://unm.edu/~gleasonj">Joseph D. Gleason</a>, and <a href="https://unm.edu/~oishi" target="_blank">Meeko M. K. Oishi</a></p>
          <!--<p><a href="https://hscl.unm.edu/">Hybrid Systems and Control Lab, UNM</a></p>-->
          <p><a href="/installation">SReachTools Installation Page</a></p>
        <p>Powered by <a href="https://jekyllrb.com/">Jekyll</a>; theme modified from <a href="https://github.com/jekyll/minima">Jekyll minima</a></p>
      </div>
  </div>

</footer>
</body>

</html>
